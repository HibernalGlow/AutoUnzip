# 单层文件夹扁平化功能

## 功能说明

该功能允许对包含单层文件夹结构的压缩包进行"扁平化"解压，即直接解压内容而不创建以压缩包命名的额外文件夹。

## 什么是单层文件夹结构

单层文件夹结构是指压缩包内所有文件都位于同一个顶级目录下，且根目录没有其他文件。

**示例：**
```
压缩包: example.zip
内容结构:
├── folder1/
│   ├── file1.txt
│   ├── file2.txt
│   └── subfolder/
│       └── file3.txt
```

## 扁平化效果对比

### 传统解压方式
```
解压到: example/folder1/
结果:
├── example/
│   └── folder1/
│       ├── file1.txt
│       ├── file2.txt
│       └── subfolder/
│           └── file3.txt
```

### 扁平化解压方式
```
解压到: folder1/
结果:
├── folder1/
│   ├── file1.txt
│   ├── file2.txt
│   └── subfolder/
│       └── file3.txt
```

## 使用方法

### 命令行参数
```bash
# 启用扁平化
python -m autounzip example.zip --flatten-single-folder

# 简写形式
python -m autounzip example.zip --flatten
```

### 配置文件
在JSON配置文件中添加：
```json
{
  "archives": [
    {
      "path": "example.zip",
      "flatten_single_folder": true
    }
  ]
}
```

### TUI界面
在TUI配置界面中选择"扁平化解压"预设配置，或手动勾选扁平化选项。

## 重要说明

1. **仅对单层文件夹结构生效**：如果压缩包包含多个顶级目录或根目录有文件，扁平化选项将被忽略，使用传统解压方式。

2. **自动检测**：程序会自动分析压缩包结构，只有检测到单层文件夹时才应用扁平化。

3. **安全性**：扁平化不会导致文件覆盖问题，因为解压的是完整的文件夹结构。

## 配置预设

已添加"扁平化解压"预设配置，包含以下选项：
- 扁平化单层文件夹结构
- 解压成功后删除源文件（可选）
- 从剪贴板读取路径（可选）

## 实际应用场景

1. **下载的软件包**：很多软件包都是单文件夹结构
2. **项目源码包**：GitHub下载的zip通常包含单个项目文件夹
3. **图片集合**：整理好的图片文件夹
4. **文档包**：文档集合压缩包

通过扁平化功能，可以避免创建不必要的嵌套文件夹，让文件结构更加清洁。
